library(tidyverse)
library(rstan)
library(bayesplot)

df <- data.table::fread("/home/connor/repo/data/msa-crc-incidence-50-79.txt", fill = T)
df <- df %>%
    dplyr::filter(
               !is.na(Year) &
               Count != "Suppressed" &
          #     Race %in% racial.groups &
               MSA != "" &
               Population != "Not Applicable" &
               !is.na(Population)
    ) %>%
    mutate(
        Race = ifelse(Ethnicity == "Hispanic", "Hispanic", Race),
        Count = as.numeric(Count),
        Population = as.numeric(Population)
    ) %>%
    group_by(Race, MSA, Year) %>%
    summarise(Count = sum(Count),
              Population = sum(Population)) %>%
    ungroup %>%
    select(Year, Race, MSA, Count, Population)
